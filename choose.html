<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»Šå¤©åƒä»€éº¼ï¼Ÿ - é¤å»³è½‰ç›¤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* è‡ªå®šç¾© Tailwind é…ç½® */
		tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-red': '#EF4444', /* é®®è±”çš„ç´…è‰² */
                        'primary-yellow': '#FBBF24', /* é®®è±”çš„é»ƒè‰² */
                        'primary-blue': '#3B82F6', /* é®®è±”çš„è—è‰² */
                        'bg-light': '#DCEEFF', /* <-- **æ–°çš„æ·ºè—è‰²èƒŒæ™¯** */
                    }
                }
            }
        }
        /* è½‰ç›¤å®¹å™¨çš„æ¨£å¼ï¼Œç”¨æ–¼å®šä½æŒ‡é‡ */
        #wheel-container {
            position: relative;
        }

        /* è½‰ç›¤æŒ‡é‡æ¨£å¼ */
        #pointer {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translate(-50%, -100%); /* å®šä½åœ¨è½‰ç›¤ä¸Šæ–¹ä¸­å¤® */
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid #EF4444; /* ç´…è‰²ä¸‰è§’å½¢ */
            z-index: 10;
        }

        /* è½‰ç›¤å‹•ç•«é¡åˆ¥ */
        .spin {
            /* è¨­å®šå‹•ç•«æ™‚é•·å’Œç·©å‹•å‡½æ•¸ */
            transition: transform 5s cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        /* æ—‹è½‰çµæœçš„æ”¾å¤§/å…‰æšˆæ•ˆæœ */
        .highlight {
            animation: pulse-glow 1.5s infinite alternate;
        }

        @keyframes pulse-glow {
            from {
                transform: scale(1);
                box-shadow: 0 0 5px rgba(251, 191, 36, 0.4);
            }
            to {
                transform: scale(1.05);
                box-shadow: 0 0 30px rgba(251, 191, 36, 0.8), 0 0 50px rgba(239, 68, 68, 0.6);
            }
        }

        /* éš±è—æ‰‡å€æ–‡å­—çš„æº¢å‡ºéƒ¨åˆ† */
        .sector-text {
            overflow: hidden;
            white-space: nowrap;
        }

    </style>
</head>
<body class="bg-bg-light min-h-screen p-4 sm:p-8 font-sans">

    <div class="max-w-4xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-5xl font-extrabold text-primary-red">
                <span class="mr-2">ğŸ²</span>ä»Šå¤©åƒä»€éº¼ï¼Ÿ
            </h1>
            <p class="text-xl text-gray-700 mt-2">
                è¼¸å…¥é¤å»³æˆ–é£Ÿç‰©é¸é …ï¼Œè®“å‘½é‹ç‚ºä½ æ±ºå®šï¼
            </p>
        </header>

        <section class="mb-8 p-6 bg-white rounded-xl shadow-2xl border-4 border-primary-yellow">
            <label for="options-input" class="block text-lg font-bold text-gray-800 mb-2">
                ğŸœ è¼¸å…¥é¸é … (ä»¥é€—è™Ÿ "," åˆ†éš”)
            </label>
            <textarea id="options-input" rows="3"
                class="w-full p-4 border-4 border-primary-blue rounded-lg text-lg focus:ring-4 focus:ring-primary-blue focus:border-primary-blue transition duration-200"
                placeholder="ä¾‹å¦‚ï¼šç‰›è‚‰éºµ, ç¾©å¤§åˆ©éºµ, å£½å¸, æ¼¢å ¡, ç«é‹">
ç‰›è‚‰éºµ, ç‚’é£¯, å£½å¸, è‡­è±†è…, é£Ÿå®‰å”¯é›, è¶Šå—æ–™ç†, è¬éš†ç‚­çƒ¤é›æ’
            </textarea>
            <p class="mt-2 text-sm text-gray-500">æç¤ºï¼šè‡³å°‘è¼¸å…¥å…©å€‹é¸é …æ‰èƒ½é‹ä½œã€‚</p>
        </section>

        <main class="flex flex-col items-center">
            <div id="wheel-container" class="mb-8 w-80 h-80 sm:w-96 sm:h-96 relative">
                <div id="pointer"></div>

                <svg id="wheel" viewBox="0 0 100 100" class="w-full h-full transform transition-transform duration-500 rounded-full shadow-2xl border-8 border-primary-red bg-white">
                    </svg>
            </div>

            <div id="result-display" class="mb-8 p-4 w-full text-center min-h-[5rem]">
                <p id="result-text" class="text-3xl sm:text-4xl font-black text-gray-800 transition duration-300">
                    é»æ“ŠæŒ‰éˆ•é–‹å§‹ï¼
                </p>
            </div>

			<button id="spin-button"
			    class="px-12 py-4 text-2xl font-extrabold text-primary-blue 
			           bg-primary-red border-4 border-primary-yellow 
			           rounded-full shadow-2xl shadow-primary-red/50 
			           ring-4 ring-primary-yellow/80 ring-offset-4 ring-offset-bg-light 
			           active:bg-red-700 transition duration-150 
			           transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed">
			    ğŸ½ï¸ ä»Šå¤©åƒé€™å€‹ï¼
			</button>
        </main>

        <footer class="mt-12 text-center text-sm text-gray-500">
            <p>é¤å»³åœ°é»é¸æ“‡è½‰ç›¤ | Pure JS + Tailwind CSS</p>
        </footer>
    </div>

    <script>
        const inputElement = document.getElementById('options-input');
        const wheelSvg = document.getElementById('wheel');
        const spinButton = document.getElementById('spin-button');
        const resultText = document.getElementById('result-text');

        // å®šç¾©è½‰ç›¤é¡è‰²ï¼ˆé«˜é£½å’Œåº¦ï¼‰
        const colors = [
			'#EF4444', // é®®ç´…è‰² (Primary Red, ex: ç•ªèŒ„)
            '#FBBF24', // é®®é»ƒè‰² (Primary Yellow, ex: æª¸æª¬/ç‰ç±³)
            '#3B82F6', // é®®è—è‰² (Primary Blue, ex: è—è“/é£²æ–™)
            '#10B981', // ç¿¡ç¿ ç¶  (Emerald Green, ex: è”¬èœ)
            '#EC4899', // äº®ç²‰è‰² (Pink, ex: è‰è“/ç”œé»)
            '#8B5CF6', // ç´«ç¾…è˜­ (Violet, ex: èŒ„å­/è‘¡è„)
            '#F97316', // æ©˜è‰² (Orange, ex: æŸ‘æ©˜/å—ç“œ)
            '#65A30D', // æ©„æ¬–ç¶  (Olive Green, ex: é…ªæ¢¨/æ©„æ¬–)
            '#06B6D4', // é’è‰² (Cyan, ex: è–„è·/æ¸…çˆ½)
            '#7C3AED', // æ·±ç´« (Deep Purple)
            '#BE185D', // è“æœç´… (Berry Red)
            '#D97706', // é‡‘è‰² (Gold/Brownish Yellow, ex: çƒ¤éºµåŒ…)
        ];

        let options = [];
        let isSpinning = false;
        let rotation = 0; // è¨˜éŒ„ç•¶å‰ç¸½æ—‹è½‰è§’åº¦

        /**
         * 1. æ ¹æ“šè¼¸å…¥æ¡†å…§å®¹é‡æ–°ç¹ªè£½è½‰ç›¤
         */
        function drawWheel() {
            // ç§»é™¤èˆŠçš„ highlighting
            resultText.textContent = 'é»æ“ŠæŒ‰éˆ•é–‹å§‹ï¼';
            resultText.classList.remove('text-primary-red', 'highlight');
            
            // è™•ç†é¸é …
            const inputText = inputElement.value.trim();
            options = inputText.split(',').map(item => item.trim()).filter(item => item.length > 0);
            
            if (options.length === 0) {
                wheelSvg.innerHTML = '';
                spinButton.disabled = true;
                return;
            }
            
            spinButton.disabled = isSpinning;
            
            const numOptions = options.length;
            const anglePerOption = 360 / numOptions;
            wheelSvg.innerHTML = ''; // æ¸…ç©ºèˆŠå…§å®¹

            options.forEach((option, index) => {
                const startAngle = index * anglePerOption;
                const endAngle = (index + 1) * anglePerOption;
                const midAngle = startAngle + anglePerOption / 2;
                const color = colors[index % colors.length];

                // SVG Path for a sector (ä½¿ç”¨ç°¡å–®çš„ Pie Chart æ‰‡å½¢è·¯å¾‘)
                // åŠå¾‘ R = 50, ä¸­å¿ƒé» (50, 50)
                const R = 50;
                const centerX = 50;
                const centerY = 50;

                // è§’åº¦è½‰å¼§åº¦
                const toRad = (angle) => angle * Math.PI / 180;

                // è¨ˆç®—æ‰‡å½¢é‚Šç•Œé»åº§æ¨™
                const x1 = centerX + R * Math.cos(toRad(startAngle - 90));
                const y1 = centerY + R * Math.sin(toRad(startAngle - 90));
                const x2 = centerX + R * Math.cos(toRad(endAngle - 90));
                const y2 = centerY + R * Math.sin(toRad(endAngle - 90));

                const largeArcFlag = anglePerOption > 180 ? 1 : 0;

                const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                path.setAttribute('d', `
                    M ${centerX} ${centerY}
                    L ${x1} ${y1}
                    A ${R} ${R} 0 ${largeArcFlag} 1 ${x2} ${y2}
                    Z
                `);
                path.setAttribute('fill', color);
                path.setAttribute('stroke', 'white');
                path.setAttribute('stroke-width', '0.5');
                path.classList.add('wheel-sector');
                path.dataset.option = option;
                path.dataset.index = index;
                wheelSvg.appendChild(path);

                // æ‰‡å€æ–‡å­—
                const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                const textX = centerX + (R * 0.7) * Math.cos(toRad(midAngle - 90));
                const textY = centerY + (R * 0.7) * Math.sin(toRad(midAngle - 90));
                
                // è®“æ–‡å­—é¢å‘å¤–
                const textRotation = midAngle + 90; 

                text.setAttribute('x', textX);
                text.setAttribute('y', textY);
                text.setAttribute('transform', `rotate(${textRotation}, ${textX}, ${textY})`);
                text.setAttribute('text-anchor', 'middle');
                text.setAttribute('fill', 'white');
                text.setAttribute('font-size', anglePerOption > 45 ? '4' : '3.5');
                text.setAttribute('font-weight', 'bold');
                text.classList.add('sector-text');
                text.textContent = option.length > 8 ? option.substring(0, 8) + '...' : option;
                wheelSvg.appendChild(text);
            });
            
            // ç¢ºä¿è½‰ç›¤åœ¨åˆå§‹ç‹€æ…‹
            wheelSvg.style.transform = `rotate(${rotation}deg)`;
        }

        /**
         * 2. å•Ÿå‹•æ—‹è½‰é‚è¼¯
         */
        function spinWheel() {
            if (isSpinning || options.length < 2) return;

            isSpinning = true;
            spinButton.disabled = true;
            resultText.textContent = 'ğŸš€ æ—‹è½‰ä¸­...';
            resultText.classList.remove('text-primary-red', 'highlight');

            const numOptions = options.length;
            const anglePerOption = 360 / numOptions;

            // 1. é¸æ“‡ä¸€å€‹éš¨æ©Ÿçµæœçš„ç´¢å¼•
            const winningIndex = Math.floor(Math.random() * numOptions);
            const winningOption = options[winningIndex];

            // 2. è¨ˆç®—ç›®æ¨™è§’åº¦
            // è½‰ç›¤çš„ 0 åº¦å°æ‡‰ç¬¬ä¸€å€‹é¸é …çš„ä¸­ç·š (ç´¢å¼• 0)
            // æŒ‡é‡æŒ‡å‘é ‚éƒ¨ (0åº¦)ï¼Œæ‰€ä»¥æˆ‘å€‘å¸Œæœ›è´å®¶é¸é …çš„**ä¸­ç·š**åœ¨æŒ‡é‡è™•ã€‚
            // è´å®¶é¸é …ä¸­ç·šè§’åº¦ï¼š(winningIndex * anglePerOption) + (anglePerOption / 2)
            
            // æˆ‘å€‘éœ€è¦æ—‹è½‰çš„åº¦æ•¸æ˜¯ï¼š 360 - (è´å®¶é¸é …ä¸­ç·šè§’åº¦)
            const winningAngle = (winningIndex * anglePerOption) + (anglePerOption / 2);
            
            // è€ƒæ…®æŒ‡é‡åœ¨ 0 åº¦ï¼Œæˆ‘å€‘éœ€è¦å°‡ winningAngle è½‰åˆ° 360 åº¦ (å®Œæ•´ä¸€åœˆ)
            // è®“æŒ‡é‡æŒ‡å‘è©²é¸é …ï¼š (360 - winningAngle) 
            let targetAngle = 360 - winningAngle;
            
            // 3. ç¢ºä¿è‡³å°‘æ—‹è½‰ 5 åœˆ (1800åº¦) æ‰èƒ½æœ‰æ˜é¡¯çš„æ¸›é€Ÿå‹•ç•«
            const minRevolutions = 5;
            targetAngle += (minRevolutions * 360); 

            // 4. åŠ ä¸Šä¸€å€‹éš¨æ©Ÿå°åç§»ï¼Œè®“æ¯æ¬¡åœä¸‹çš„ä½ç½®ä¸å®Œå…¨ä¸€æ¨£
            targetAngle += (Math.random() * anglePerOption * 0.8) - (anglePerOption * 0.4); 

            // 5. åŸ·è¡Œ CSS æ—‹è½‰å‹•ç•«
            // æ›´æ–°ç¸½æ—‹è½‰è§’åº¦
            rotation += targetAngle; 
            
            // æ·»åŠ  spin é¡åˆ¥ä»¥å•Ÿç”¨ transition æ•ˆæœ (5ç§’ç·©å‹•)
            wheelSvg.classList.add('spin'); 
            wheelSvg.style.transform = `rotate(${rotation}deg)`;

            // 6. ç­‰å¾…å‹•ç•«çµæŸ (5ç§’)
            setTimeout(() => {
                isSpinning = false;
                spinButton.disabled = false;
                wheelSvg.classList.remove('spin');
                
                // ç¢ºä¿ CSS transition çµæŸå¾Œï¼Œç§»é™¤ spin classï¼Œä½†ä¿ç•™æœ€çµ‚çš„ transform å±¬æ€§
                wheelSvg.style.transform = `rotate(${rotation}deg)`; 
                
                // é¡¯ç¤ºçµæœ
                resultText.textContent = `å°±æ˜¯å®ƒäº†ï¼š ${winningOption}ï¼`;
                resultText.classList.add('text-primary-red', 'highlight');

                // é«˜äº®è¢«é¸ä¸­çš„æ‰‡å€
                highlightSector(winningIndex);

            }, 5000); // èˆ‡ CSS transition-duration ä¿æŒä¸€è‡´
        }
        
        /**
         * 3. çµæœé«˜äº®é¡¯ç¤ºæ‰‡å€
         */
        function highlightSector(index) {
            // å…ˆæ¸…é™¤æ‰€æœ‰æ‰‡å€çš„é«˜äº®
            document.querySelectorAll('.wheel-sector').forEach(path => {
                path.classList.remove('scale-105', 'shadow-xl'); // ç§»é™¤å¯èƒ½çš„çªå‡ºé¡¯ç¤º
            });
            
            // é‡å°è´å®¶æ‰‡å€é€²è¡Œé«˜äº®
            const winnerSector = document.querySelector(`.wheel-sector[data-index="${index}"]`);
            if (winnerSector) {
                // SVG å…ƒç´ è¼ƒé›£ç›´æ¥ä½¿ç”¨ CSS æ•ˆæœï¼Œé€™è£¡åšä¸€å€‹ç°¡å–®çš„é¡è‰²é‚Šæ¡†çªå‡º
                // åœ¨æœ¬ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘ä¸»è¦ä¾è³´ result-text çš„æ”¾å¤§/å…‰æšˆæ•ˆæœä¾†å¯¦ç¾çªå‡ºã€‚
                // å¦‚æœéœ€è¦ SVG å…§çš„è¦–è¦ºçªå‡ºï¼Œå¯ä»¥èª¿æ•´å…¶ stroke-width æˆ–é¡è‰²ï¼Œä½†é€™è£¡ç¶­æŒä¸»è¦çµæœé¡¯ç¤ºåœ¨æ–‡å­—ä¸Šã€‚
            }
        }

        /**
         * 4. äº‹ä»¶ç›£è½å™¨
         */
        document.addEventListener('DOMContentLoaded', () => {
            // åˆå§‹ç¹ªè£½
            drawWheel(); 
            
            // è¼¸å…¥æ¡†å…§å®¹æ”¹è®Šæ™‚é‡æ–°ç¹ªè£½
            inputElement.addEventListener('input', drawWheel);

            // æŒ‰éˆ•é»æ“Šäº‹ä»¶
            spinButton.addEventListener('click', spinWheel);
        });
        
    </script>
</body>

</html>


